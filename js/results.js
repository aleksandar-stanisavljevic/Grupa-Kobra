var results = [
    {
      "id": 25,
      "name": "Autumn in Toponica",
      "image": "images/autumn2015.jpg",
      "category": "camp",
      "year": "2015",
      "description": "Šesti međunarodni volonterski kamp se održao od 25.09. do 05.10.2015. godine u Donjoj Toponici uz podršku Mladih istraživača Srbije i Ministarstva omladine i sporta Republike Srbije"
    },
    {
      "id": 24,
      "name": "Summer in Toponica",
      "image": "images/summer2015.jpg",
      "category": "camp",
      "year": 2015,
      "description": "Peti kamp u Donjoj Toponici je organizovan sa ciljem da se mladi ljudi iz lokalne zajednice upoznaju sa svojim vršnjacima iz celog sveta s obzirom na to da nemaju mnogo mogućnosti da putuju. Realizovan je u saradnji sa Međunarodnim volonterskim servisom i Mladim istraživačima Srbije."
    },
    {
      "id": 23,
      "name": "Spring in Toponica",
      "image": "images/spring2015.jpg",
      "category": "camp",
      "year": "2015",
      "description": "Udruženja građana Grupa Kobra je organizovala prvi prolećni međunarodni kamp 'Spring in Toponica'. Desetodnevni kamp je bio održan od 17. do 27.maja. Grupa Kobra je kamp organizovala u saradnji sa Volonterskim servisom Srbije i Mladim istraživačima Srbije."
    },
    {
      "id": 22,
      "name": "Proaktivni mladi u ruralnim sredinama",
      "image": "images/agro.jpg",
      "category": "project",
      "year": "2015",
      "description": "Organizacija civilnog društva Proaktiv u saradnji sa partnerima AgroVet menadžment projekt – AVM i Grupom Kobra, pokrenula je projekat pod nazivom 'Proaktivni mladi u ruralnim sredinama'."
    },
    {
      "id": 21,
      "name": "Oktobarsko popodne",
      "image": "images/oktobarsko_popodne.jpg",
      "category": "action",
      "year": "2014",
      "description": "Cilj manifestacije je očuvanje tradicije i kulture, kao i prenošenje iskustva i znanja u pripremi tradicionalnih jela mlađim generacijama. Događaj su ulepšali gosti iz Udruženja gljivara Niš, lovačkog i ribolovačkog udruženja, gosti iz Svrljiga i Karavan tim 'Biciklom kroz Srbiju'."
    },
    {
      "id": 20,
      "name": "Biciklistički karavan u čast volonterizma",
      "image": "images/bike_karavan.jpg",
      "category": "action",
      "year": "2014",
      "description": "31. jula organizovan je biciklistički karavan od Trga kralja Milana u centru Niša do Donje Toponice gde je bila otkrivena statua i upaljena baklja koja simbolizuje volonterizam."
    },
    {
      "id": 19,
      "name": "Summer in Toponica",
      "image": "images/summer2014.jpg",
      "category": "camp",
      "year": "2014",
      "description": "Treći  po redu, međunarodni radni kamp Grupa Kobra je organizovala u saradnji sa Volonterskim servisom Srbije i Mladim istraživačima Srbije."
    },
    {
      "id": 18,
      "name": "'Stop plastičnim kesama' u Trnavi i Toponici",
      "image": "images/kese.jpg",
      "category": "action",
      "year": "2013",
      "description": "Robu koju kupe u lokalnim prodavnicama, meštani Donje Toponice i Donje Trnave ubuduće neće nositi kući u plastičnim kesama, jer su od Udruženja Kobra dobili biorazgradive torbe."
    },
    {
      "id": 17,
      "name": "Summer in Toponica",
      "image": "images/summer2013.jpg",
      "category": "camp",
      "year": 2013,
      "description": "Drugi međunarodni letnji kamp grupe Kobra, pod nazivom 'Summer in Toponica', je trajao od 1. do 15. jula. Realizovan je u saradnji sa Međunarodnim volonterskim servisom i Mladim istraživačima Srbije."
    },
    {
      "id": 16,
      "name": "Summer in Toponica",
      "image": "images/summer2012.jpg",
      "category": "camp",
      "year": 2012,
      "description": "Prvi međunarodni letnji kamp Grupe Kobra. Kamp je trajao od 3. do 12. jula, a realizovan je u saradnji sa Međunarodnim volonterskim servisom i Mladim istraživačima Srbije."
    },
    {
      "id": 15,
      "name": "Nagrada 'Šetač'",
      "image": "images/setac.jpg",
      "category": "award",
      "year": "2012",
      "description": "Predsednik grupe, Milan Stojiljković, dobio je nagradu 'Šetač' za poseban doprinos u civilnom sektoru kroz građanski aktivizam, od strane OCD Proaktiva iz Niša."
    },
    {
      "id": 14,
      "name": "Nagrada 'Zeleni list'",
      "image": "images/zeleni_list.jpg",
      "category": "award",
      "year": "2012",
      "description": "Najprestižnija ekološka nagrada u Srbiji - 'Zeleni list' - dodeljuje Radio Beograd 2 i Pokret Gorana Vojvodine, a za poseban doprinos očuvanju sredine na lokalu. Nagrada je uramljena diploma 'Zeleni list'."
    },
    {
      "id": 13,
      "name": "Čišćenje snega i druženje sa meštanima",
      "image": "images/ciscenje_snega.jpg",
      "category": "action",
      "year": "2012",
      "description": "Udruženje građana Kobra organizuje akciju čišćenja snega u staračkim i samačkim domaćinstvima u Donjoj Toponici. Akcija je organizovana u okviru zimskog festivala."
    },
    {
      "id": 12,
      "name": "'Červišijada' u Donjoj Toponici",
      "image": "images/cervisijada.jpg",
      "category": "action",
      "year": "2012",
      "description": "Na zimskom festivalu u Donjoj Toponici, u nedelju, 29. januara, održana je manifestacija ''Červišijada'."
    },
    {
      "id": 11,
      "name": "'Kobra' pomaže ugroženim domaćinstvima",
      "image": "images/pomoc.jpg",
      "category": "action",
      "year": "2012",
      "description": "Udruženje građana Kobra podelilo oko 60 paketa humanitarne pomoći u vidu hrane ugroženim domaćinstvima u selima Donja Toponica, Mezgraja i Donja Trnava. Akcija je organizovana u okviru zimskog festivala."
    },
    {
      "id": 10,
      "name": "Nagrada Ministarstva za omladinu i sport Republike Srbije",
      "image": "images/domen.jpg",
      "category": "award",
      "year": "2011",
      "description": "Nagrada Ministarstva za omladinu i sport Republike Srbije - besplatan sajt za godinu dana, a zbog najvećeg broja fejsbuk glasova za najbolju akciju u okviru programa 'Mladi su zakon'."
    },
    {
      "id": 9,
      "name": "Nagrada za najpozitivniju akciju u Srbiji",
      "image": "images/tasco.jpg",
      "category": "award",
      "year": "2011",
      "description": "Nagrada za najpozitivniju akciju u Srbiji - 'Javni prostor za sve nas' - na mestu divlje deponije napravljen teren za odbojku na pesku i mini izletište u Donjoj Trnavi kod Niša - Fondacija 'Mesta u srcu' i Microsoft dodelili 1.500 evra za nastavak realizacije ideje."
    },
    {
      "id": 8,
      "name": "Nagrada za najpozitivniji projekat u Srbiji",
      "image": "images/tasco2010.jpg",
      "category": "award",
      "year": "2010",
      "description": "Nagrada za najpozitivniji projekat u Srbiji - 'Dom za sve' - rekonstruisan i oživljen stari i napušteni Dom kulture - Fondacija 'Mesta u srcu' i Microsoft su dodelili 1.500 evra za nastavak realizacije ideje."
    },
    {
      "id": 7,
      "name": "Život na selu danas",
      "image": "images/zivot_na_selu.jpg",
      "category": "project",
      "year": "2010",
      "description": "Cilj projekta je bio da se putem biciklističkog karavana, sačinjenog od 10-ak mladih ljudi, promovišu zdravi stilovi života i ujedno snimi film o tome kako se zaista danas živi na selima na jugu Srbije. Projekat je realizovan pod pokroviteljstvom Fonda za otvoreno društvo iz Beograda."
    },
    {
      "id": 6,
      "name": "Hajde da provedemo raspust u školi",
      "image": "images/raspust.jpg",
      "category": "project",
      "year": "2010",
      "description": "Pedesetak mladih ljudi iz Jugoistočne Srbije podeljeno u pet vodova, prisustvovalo je i učestvovalo u petodnevnom tematskom kampu u dvorištu Osnovne škole u Donjoj Trnavi. Realizaciju pomogla Osnovna škola i OI 'Šumatovac' iz Aleksinca. Glavne teme su bile sport, promovisanje stilova zdravog života, savladavanje osnovnih izviđačkih veština, igre bez granica i upoznavanje sa volonterizmom i radom nevladinih organizacija."
    },
    {
      "id": 5,
      "name": "Javni prostor za sve",
      "image": "images/prostor_za_sve.jpg",
      "category": "project",
      "year": "2009",
      "description": "Microsoft je obezbedio 150.000 din za projekat čišćenja ogromne divlje deponije na putu između Donje Topionice i Donje Trnave. Projekat je realizovan od maja do avgusta 2010. godine."
    },
    {
      "id": 4,
      "name": "Urbana oaza",
      "image": "images/urbana_oaza.jpg",
      "category": "action",
      "year": 2009,
      "description": "Projekat je realizovan zahvaljujuci donaciji Evroposkog pokreta u Srbiji i Ministarstva za omladinu i sport. Cilj projekta je bio da kroz edukaciju osnovaca na temu 'Zaštita životne sredine' podignemo njihovu svest o tome i da kroz kreativne radionice izrade i oslikavanja kanti za odlaganje smeća i tabli upozorenja, proširimo akciju na meštane više sela. Po završetku projekta, najaktivniji đaci, postali su članovi i volonteri organizacije i dalje se angažuju na raznim projektima. Projekat je podržala i pomogla i lokalna Osnovna škola 'Branislav Nušić' na čelu sa direktorom Borislavom Čukletom."
    },
    {
      "id": 3,
      "name": "RešivoJe",
      "image": "images/resivoje.png",
      "category": "award",
      "year": 2009,
      "description": "Predsednik grupe, Milan Stojiljković, proglašen je najoljim omladiskim aktivistom u okviru kampanje E, mogu i ja od strane Evropskog pokreta u Srbiji i Ministarstva za omladinu i sport Republike Srbije. Nagrada je u vidu statue RešivoJe."
    },
    {
      "id": 2,
      "name": "Dom za sve",
      "image": "images/dom_za_sve.jpg",
      "category": "project",
      "year": "2009",
      "description": "Pod donacijom Balkanskog fonda za lokalne inicijative - BCIF iz Beograda, rekonstruisali smo i adaptirali stari i oronuli seoski Dom kulture, te stavili ga u funkciju. Naime, napravljena je sala za stoni tenis, karate i folklor, sala za projetovanje filmova, klub, sala za edukaciju i seoska biblioteka za koju smo prikupili blizu hiljadu izdanja."
    },
    {
      "id": 1,
      "name": "Nagrada za najbolju volontersku akciju u Srbiji",
      "image": "images/oboji_zeleno2008.jpg",
      "category": "award",
      "year": "2008",
      "description": "Nagrada za najbolju volotersku akciju u Srbiji - projekat Oboji zeleno - park za decu na mestu nekadašnje divlje deponije. Nagradu dodelilo Ministarstvo za omladinu i sport Repulike Srbije i Grupa Proces. Nagrada je bila monitor za kompjuter."
    },
    {
      "id": 0,
      "name": "Oboji zeleno",
      "image": "images/oboji_zeleno.jpg",
      "category": "project",
      "year": 2008,
      "description": "Grupa je prošla na konkurs NVO Protecta iz Niša i Ministarstva za omladinu i sport R.Srbije - Akcija mladih za bolju zajednicu 2008. godine. Projekat je podrazumevao izgradnju dečijeg parka na mestu divlje deponije u samom selu - Donja Toponica. Sprovedena je likovna radionica za učenike Osnovne škole Branislav Nušić iz Donje Trnave na temu Selo za XXI vek, a nagrađeni su najbolji radovi. Pored toga, u samom parku i šire, zasađeno je 50 stabala."
    }
];

var idNumber = document.getElementById("idNumber");
var commentsDiv = document.getElementById("comments");
var resultsDiv = document.getElementById("results");
var breadcrumb = document.getElementById('breadcrumb');
var commentImage = document.getElementById("commentImage");
var commentId = document.getElementById('commentId');
var linkBack = document.getElementById('linkBack');

//tab navbar for Akcije, Projekti, Kampovi i Nagrade
results.forEach(function(i, item){
  var imageAlt = (results[item].image.split("/")[1]).split(".")[0];
  var mainDiv = document.createElement("div");
  var imageDiv = document.createElement("div");
  imageDiv.className = "eventsImage";
  var linkImage = document.createElement("a");
  linkImage.innerHTML = "<img src='" + results[item].image + "' alt='" + imageAlt + "'>";
  mainDiv.id = "bt_" + item;
  mainDiv.className = "bt";
  mainDiv.appendChild(imageDiv);
  imageDiv.appendChild(linkImage);
  var textDiv = document.createElement("div");
  textDiv.className = "textResults";
  var headerDiv = document.createElement("div");
  headerDiv.innerHTML = results[item].name;
  headerDiv.className = "headerStyle";
  var yearDiv = document.createElement("div");
  yearDiv.innerHTML = "<span>" + results[item].year + "</span>";
  yearDiv.className = "year";
  var descriptionDiv = document.createElement("div");
  descriptionDiv.innerHTML = "<img class='smallResults' src='" + results[item].image + "' alt='" + imageAlt + "'><p class='smallResults'>" + results[item].name + "</p><p class='smallResults'><span>" + results[item].year + "</span><br></p>" + results[item].description;
  descriptionDiv.className = "descriptionResult";
  textDiv.appendChild(headerDiv);
  textDiv.appendChild(yearDiv);
  textDiv.appendChild(descriptionDiv);
  mainDiv.appendChild(textDiv);

  if(results[item].category == 'camp'){
    document.getElementById('camp').appendChild(mainDiv);
  }
  else if(results[item].category == 'project'){
    document.getElementById('project').appendChild(mainDiv);
  }
  else if(results[item].category == 'action'){
    document.getElementById('action').appendChild(mainDiv);
  }
  else if(results[item].category == 'award'){
    document.getElementById('award').appendChild(mainDiv);
  }

  getHoverEvent.bind(item)();

  document.getElementById("bt_" + item).onclick = function(){
    idNumber.value = item;
    getComment.bind(results[item])();
  }
});

//tab navbar for Desavanja
results.forEach(function(i, item){
  var imageAlt = (results[item].image.split("/")[1]).split(".")[0];
  var mainDiv = document.createElement("div");
  var imageDiv = document.createElement("div");
  imageDiv.className = "eventsImage";
  var linkImage = document.createElement("a");
  linkImage.innerHTML = "<img src='" + results[item].image + "' alt='" + imageAlt + "'>";
  mainDiv.id = "bt_" + item;
  mainDiv.className = "bt";
  mainDiv.appendChild(imageDiv);
  imageDiv.appendChild(linkImage);
  var textDiv = document.createElement("div");
  textDiv.className = "textResults";
  var headerDiv = document.createElement("div");
  headerDiv.innerHTML = results[item].name;
  headerDiv.className = "headerStyle";
  var yearDiv = document.createElement("div");
  yearDiv.innerHTML = "<span>" + results[item].year + "</span>";
  yearDiv.className = "year";
  var descriptionDiv = document.createElement("div");
  descriptionDiv.innerHTML = "<img class='smallResults' src='" + results[item].image + "' alt='" + imageAlt + "'><p class='smallResults'>" + results[item].name + "</p><p class='smallResults'><span>" + results[item].year + "</span><br></p>" + results[item].description;
  descriptionDiv.className = "descriptionResult";
  textDiv.appendChild(headerDiv);
  textDiv.appendChild(yearDiv);
  textDiv.appendChild(descriptionDiv);
  mainDiv.appendChild(textDiv);

  document.getElementById("events").appendChild(mainDiv);

  getHoverEvent.bind(item)();

  document.getElementById("bt_" + item).onclick = function(){
    idNumber.value = item;
    getComment.bind(results[item])();
  }
});

//hover effect
function getHoverEvent(){
  document.getElementById("bt_" + this).onmouseover = function(){
    this.style.boxShadow = "0px 0px 15px black";
    this.style.cursor = "pointer";
  }
  document.getElementById("bt_" + this).onmouseout = function(){
    this.style.boxShadow = "none";
    this.style.cursor = "none";
  }
}

//open comment
function getComment(){
  var imageAlt = (this.image.split("/")[1]).split(".")[0];
  commentsDiv.style.display = "block";
  resultsDiv.style.display = "none";
  displayFromDatabase();
  breadcrumb.innerHTML = "<a href='results.html'>Rezultati</a> / Komentari";
  commentImage.innerHTML = "<img src='" + this.image + "' alt='" + imageAlt + "'>";
  commentId.innerHTML = "<p>" + this.name + "<span id='commentYear'>" + this.year + "</span></p><p>" + this.description + "</p>";
  linkBack.innerHTML = "<button id='back'>Nazad</button>";
};

//tab navbar
function showResults(category){
    var i;
    var tabcontent = document.getElementsByClassName("contentResults");
    var tablinks = document.getElementsByClassName("navResults");
    var cat = document.getElementById(category + "Category");

    for (i = 0; i < tabcontent.length; i++){
        tabcontent[i].style.display = "none";
    }
    for (i = 0; i < tablinks.length; i++){
      tablinks[i].getElementsByTagName('a')[0].style.color = "#428bca";
      tablinks[i].style.border = "none";
      tablinks[i].style.borderBottom = "1px solid rgba(0, 0, 0, 0.4)";
    }
    cat.style.border = "1px solid rgba(0, 0, 0, 0.4)";
    cat.style.borderBottom = "1px solid white";
    cat.style.borderTopLeftRadius = "5px";
    cat.style.borderTopRightRadius = "5px";
    document.getElementById(category).style.display = "block";
    document.getElementById(category + "Nav").style.color = "rgba(0, 0, 0, 0.8)";
}

var inputYourName = document.getElementById('yourName');
var inputYourComment = document.getElementById('commentInput');
var sendComment = document.getElementById('sendComment');
var errorEmptyMessage = document.getElementsByClassName('errorEmptyMessage');
var errorNoneInput = document.getElementsByClassName('error_none_input');

//validate name and comment
function errorValidateComment(errorBox, errorEmpty, child){
  if (errorBox.value == ""){
    sendComment.disabled = true;
    errorBox.style.border = "1px solid red";
    errorBox.style.boxShadow = "0 0 5px red";
    errorEmptyMessage[child].style.display = "inline";
    errorNoneInput[child].style.display = "inline-block";

    errorBox.addEventListener("blur", function (){
      errorBox.style.boxShadow = "0 0 5px red";
      errorBox.style.border = "1px solid red";
    });
  }
  else{
    if(errorEmpty.value == ""){
      sendComment.disabled = true;
    }
    else{
      sendComment.disabled = false;
    }
    errorEmptyMessage[child].style.display = "none";
    errorNoneInput[child].style.display = "none";
    errorBox.style.border = "1px solid rgba(81, 203, 238, 1)";
    errorBox.style.boxShadow = "0 0 5px rgba(81, 203, 238, 1)";

    errorBox.addEventListener("blur", function (){
      errorBox.style.boxShadow = "none";
      errorBox.style.border = "1px solid #DDDDDD";
    });
  }
};
